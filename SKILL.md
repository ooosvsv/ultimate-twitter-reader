---
name: ultimate-twitter-reader
description: 终极推文解析器。支持多链接批量抓取、长文提取、知识库格式化，并结合视觉能力（Vision）自动进行图片 OCR 与总结，直接在对话框中完美输出。
version: 1.0.0
---

# Ultimate Twitter Reader & Analyzer

## 🎯 触发场景 (Trigger)

当用户在对话中发送一个或多个 x.com 或 twitter.com 链接，或者明确要求你总结推文内容、提取图片上的文字时。

## ⚙️ 执行步骤 (Instructions)

请严格遵循以下步骤处理，并将最终结果直接输出给用户（你的回复将自动显示在用户的 Telegram 中）。

### Step 1: 执行抓取引擎

调用你内置的 Python 环境运行该技能目录下的 `fetcher.py`：

```bash
python3 ultimate-twitter-reader/fetcher.py --urls "<用户输入的完整文本>"
```

**注意**：
- `<用户输入的完整文本>` 必须包含用户发送的原始文本，其中包含一个或多个推文链接
- 脚本会自动从文本中提取所有推文 ID 并批量处理
- 支持一次性处理多个链接

### Step 2: 深度阅读与视觉 OCR 解析

仔细阅读 Python 脚本返回的结构化 Markdown 输出：

- **长文阅读**：阅读 > 引用块中的原推文内容。
- **多模态视觉 (Vision OCR)**：如果输出中存在 `![Image_X](URL)` 的图片语法，请立刻利用你自身的多模态视觉能力直接读取这些图片链接。
  - 提取图片中的所有关键文字（OCR）。
  - 简要描述图片或图表传达的核心信息。

### Step 3: 生成 Telegram 专属精美排版

结合原文、数据以及你从图片中"看到"的内容，直接在对话框中向用户输出一份排版精美的中文报告。由于目标平台是 Telegram，请使用以下格式准则：

- **核心摘要**：用 2-3 句话高度概括这条推文（和图片）讲了什么。
- **详细总结 (Bullet points)**：提取长文中的核心观点。如果推文是外文，提供精准的中文翻译和要点。
- **图片 OCR 内容（如果有图片）**：单列一段"🖼 图片解析"，输出你从图中提取的关键文字或表格数据。
- **媒体直链**：附上视频或图片的高清直链，方便用户在 TG 中直接点击查看。
- **知识库格式（可选）**：如果用户要求"存入记忆"或"保存"，请告诉用户你已将抓取到的 YAML 格式元数据储存在了你的上下文中。

### ⚠️ 注意事项

- 绝不要向用户暴露 Python 执行过程、啰嗦的 JSON 源码或原始的 YAML 头，用户只需要看到最终深度总结和精美排版的报告。
- 如果请求返回"抓取失败"，请礼貌地在对话中告知用户该推文可能是私密账户或已被删除。

## 🎨 输出格式示例

```markdown
### 🔍 抓取结果

---
author: "@username"
source: "https://x.com/i/status/1234567890"
date: "2024-01-15T12:30:00Z"
content_hash: "abc123..."
---

### 🐦 Name (@username)

🕒 时间: 2024-01-15 12:30 | 📊 互动: ❤️ 1.2K · 🔁 340

> 推文正文内容...

**📸 附带媒体 (Media):**
![Image_0](https://pbs.twimg.com/media/xxx.jpg)

【Vision 分析】
- 图片文字 OCR 结果...
- 图片内容总结...
---
```

## 🔧 高级用法

### 批量抓取

用户可以一次发送多个链接：

```
看看这几个：https://x.com/user1/status/111 
和 https://twitter.com/user2/status/222
还有这个 thread https://x.com/user3/status/333
```

Script 会自动提取并依次处理。

### 失败处理

如果某个推文抓取失败（删除/私密/端点不可用）：
- 显示 ❌ 错误标记
- 提供原始链接供用户手动查看
- 不中断其他推文的处理

## ⚠️ 限制与边界

- **不支持**：点赞、转发、回复等交互操作
- **不支持**：需要认证的推文（如关注者专属）
- **API 容灾**：自动切换 vxtwitter → fxtwitter
- **批量限制**：单次建议不超过 10 个链接
- **媒体**：仅提供链接和 Vision 分析，不下载文件

## 💡 配合其他技能

- `summarize`：对长推文 thread 进行深度总结
- `memory`：将重要推文保存到知识库
- `sag`：将推文内容转为语音播报

## 📝 注意事项

1. 始终使用 `--urls` 参数，传入包含链接的完整文本
2. 处理完后检查所有推文是否成功
3. Vision 分析是可选的，只有当推文包含图片时才触发
4. 输出应该 Telegram 友好，避免复杂 Markdown 语法
5. 保持原文信息完整，包括互动数据和时间戳

## 🚀 全自动无缝体验

当用户直接在 Telegram 里给 OpenClaw 发送：

> *"帮我看看这条推文说了什么，把图里的文字也提取出来：https://x.com/elonmusk/status/123456789"*

**后台发生的事情**：

1. **触发**：OpenClaw 收到推文链接，自动触发 `ultimate-twitter-reader` 技能。
2. **抓取**：执行 `fetcher.py` 瞬间拿到长文本和图片高清直链（免 API、防封锁）。
3. **Vision 识别**：大模型看到输出里的图片链接 `![Image](URL)`，自动启用自身的多模态视觉能力（如 GPT-4o 或 Claude 3.5 Sonnet）读取图片内容。
4. **综合思考**：OpenClaw 将文字、长文内容、图片上的内容整合思考。
5. **输出**：最后，**直接在你的 Telegram 对话框里**回复一段极其美观、带 Emoji、带重点加粗的深度中文总结！

一切都在 3 秒内完成，没有复杂的第三方爬虫配置，不用去申请 Twitter Token，极致优雅！
